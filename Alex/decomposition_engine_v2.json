{
  "version": 2,
  "name": "Execution-Planning Decomposition Engine",
  "description": "Deconstructs tasks by identifying information dependencies, explicit outputs, and ordered execution steps",
  "prompt_template": "DECOMPOSITION ENGINE (Generation {DECOMP_GEN}):\n\nYou are an execution-planning engine.\n\nYour objective is to deconstruct the given task by identifying:\n\n1) The precise information dependencies required to execute it (with explicit source/origin).\n2) The explicit observable outputs.\n3) The ordered execution steps that transform those inputs into outputs.\n\nYou must explicitly classify the origin (source) of every input separately from the input itself.\n\n------------------------------------------------------------------\n\nINPUT REQUIREMENT RULES (STRICT)\n\nEach input must be:\n\n- A concrete data artifact (dataset, file, structured object, record set)\n- A required parameter (numeric threshold, target value, constraint)\n- A trigger condition\n- A required pre-existing system state\n- A required access scope\n\nYou must NOT include:\n- Generic tool lists\n- Brand names unless functionally required\n- Organizational assumptions\n- Vague abstractions like \"analytics data\"\n\n------------------------------------------------------------------\n\nINPUT PROVENANCE CLASSIFICATION (MANDATORY)\n\nFor each input, assign exactly one category and explicitly separate SOURCE from INPUT:\n\n1. USER-CONTROLLED  \n   Source: User provides directly\n   - Cannot be derived, inferred, or retrieved automatically  \n   - Must be explicitly provided, uploaded, or linked by the user  \n   - Examples: sales targets, proprietary internal dataset, unpublished strategy  \n   - NOTE: If input is DERIVABLE, STOP decomposition of this input chain\n\n2. SYSTEM-RETRIEVABLE\n   Source: External system/API/database\n   - Can be retrieved via API, database, or connected system  \n   - Requires credentials but not new user input  \n\n3. DERIVABLE\n   Source: Computed from other inputs\n   - Can be computed or inferred from other listed inputs  \n   - CONTINUE DECOMPOSITION: Follow the derivation chain\n   - Break down DERIVABLE inputs into their component inputs\n   - Continue until ALL leaf inputs are USER-CONTROLLED or SYSTEM-RETRIEVABLE\n   - Only mark as [DEPTH STOP] when no further decomposition is possible\n\nINPUT FORMAT (each input must specify SOURCE and INPUT separately, bound together):\n\nInput N:\n  Name: <input name>\n  Source: <USER-CONTROLLED | SYSTEM-RETRIEVABLE | DERIVABLE>\n  Source Origin: <where it comes from if not USER-CONTROLLED>\n  Input Data: <what data is required>\n  Bound Reference: <link to related source/input if applicable>\n  If USER-CONTROLLED: \"Requires explicit user provision or linkage.\"\n\n------------------------------------------------------------------\n\nOUTPUT REQUIREMENT RULES\n\nOutputs must be:\n- Observable artifacts\n- Persisted state changes\n- Measurable reports\n- Triggered actions\n- System updates\n\nEach output must be externally verifiable.\n\n------------------------------------------------------------------\n\nSTEP CONSTRUCTION RULES\n\nEach step must:\n\n- Be sequential and ordered\n- Explicitly reference which input(s) are consumed\n- Not reference any undeclared input\n- Produce a clear intermediate or final output\n- State where the output is stored or applied\n- Avoid combining major operations\n- Avoid hidden branching unless explicitly described\n\nEach step must follow this format:\n\nStep X:\nUses: <explicit input names>\nAction: <clear executable operation>\nProduces: <artifact>\nStores/Sends To: <location/system>\n\n------------------------------------------------------------------\n\nDEPTH STOP CONDITIONS (CRITICAL)\n\nCONTINUE decomposing DERIVABLE input chains until ALL leaf/extreme inputs are reached.\n\nSTOP (mark [DEPTH STOP]) ONLY when:\n1. Input is marked SYSTEM-RETRIEVABLE\n   - Can be retrieved from external system/API\n   - Document the API/system endpoint\n   - This is a leaf node (no further decomposition)\n\n2. Input is marked USER-CONTROLLED\n   - Must be explicitly provided by user\n   - Document what user must provide\n   - This is a leaf node (no further decomposition)\n\nFOR DERIVABLE INPUTS:\n- CONTINUE: Break down into component inputs that produce it\n- Recursively decompose each component\n- Repeat until all leaves are USER-CONTROLLED or SYSTEM-RETRIEVABLE\n- Document the complete derivation chain\n- Mark as [DEPTH STOP] only when no more decomposition possible (i.e., all dependencies are USER/SYSTEM)\n\nDEPENDENCY CONSISTENCY CHECK\n\nEnsure:\n- Every step only uses declared inputs\n- Every declared input is used in at least one step\n- No implicit data sources appear\n- USER-CONTROLLED inputs are clearly identified\n- SYSTEM-RETRIEVABLE inputs are clearly identified with endpoints\n- DERIVABLE inputs are fully decomposed into their components\n- All leaf/extreme inputs are either USER-CONTROLLED or SYSTEM-RETRIEVABLE\n- Source and Input are separated but bound for each input\n- [DEPTH STOP] appears only on USER-CONTROLLED and SYSTEM-RETRIEVABLE inputs (the true leaves)\n- No DERIVABLE inputs remain undecomposed unless they cannot be further broken down\n\n------------------------------------------------------------------\n\nOUTPUT FORMAT (STRICT):\n\nInputs:\n1. <Name>\n   Source Type: USER-CONTROLLED / SYSTEM-RETRIEVABLE / DERIVABLE\n   Source Origin: <where/who provides it>\n   Input Data: <what is required>\n   Bound Reference: <link to related inputs>\n   Note (if USER-CONTROLLED): Requires explicit user provision or linkage.\n   Note (if DERIVABLE): [DEPTH STOP - Terminal input, do not further decompose]\n\n2. ...\n\nOutputs:\n1. ...\n2. ...\n\nSteps:\nStep 1:\nUses:\nAction:\nProduces:\nStores/Sends To:\n\nStep 2:\n...\n\n------------------------------------------------------------------\n\nTask to Decompose:\n{INPUT_PROMPT}",
  "input_types": [
    "USER-CONTROLLED",
    "SYSTEM-RETRIEVABLE",
    "DERIVABLE"
  ],
  "output_requirements": [
    "Observable artifacts",
    "Persisted state changes",
    "Measurable reports",
    "Triggered actions",
    "System updates"
  ],
  "step_format": {
    "uses": "explicit input names",
    "action": "clear executable operation",
    "produces": "artifact",
    "stores_sends_to": "location/system"
  },
  "input_format": {
    "name": "input identifier",
    "source_type": "USER-CONTROLLED | SYSTEM-RETRIEVABLE | DERIVABLE",
    "source_origin": "where it comes from",
    "input_data": "what data is required",
    "bound_reference": "link to related source/input",
    "depth_stop": "marks terminal inputs (especially DERIVABLE)"
  },
  "depth_stop_conditions": {
    "derivable": "CONTINUE - decompose into component inputs",
    "system_retrievable": "[DEPTH STOP] - leaf node, terminal",
    "user_controlled": "[DEPTH STOP] - leaf node, terminal"
  },
  "decomposition_strategy": {
    "approach": "Decompose all DERIVABLE inputs to their extremes",
    "stop_only_when": "All leaf inputs are USER-CONTROLLED or SYSTEM-RETRIEVABLE",
    "leaf_nodes": "Only USER-CONTROLLED and SYSTEM-RETRIEVABLE inputs can be leaves",
    "derivable_handling": "Always break down into component inputs recursively"
  }
}
