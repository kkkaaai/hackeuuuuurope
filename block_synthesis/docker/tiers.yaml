# Docker Image Configuration
# 
# Two modes:
# 1. Master image (default): Single image with ALL packages - no runtime installs
# 2. Tiered images: Progressive tiers, install only missing packages at runtime
#
# Use master for simplicity, tiered for smaller images in production

registry: "block-sandbox"  # Docker registry prefix for images

# Master image - contains ALL packages from the codebase
master:
  image: "block-sandbox-master:latest"
  description: "Complete image with all packages from every block"
  dockerfile: "master.Dockerfile"

tiers:
  tier0:
    description: "Base Python environment with stdlib only"
    base: "python:3.11-slim"
    apt_packages:
      - build-essential
    packages: []
    
  tier1:
    description: "Common web/HTTP packages"
    base: "tier0"
    packages:
      - requests
      - httpx
      - aiohttp
      - pyyaml
      - beautifulsoup4
      - lxml
      - python-dotenv
    
  tier2:
    description: "Data processing packages"
    base: "tier1"
    packages:
      - numpy
      - pandas
      - pillow
      - openpyxl
      - xlrd
      - csvkit
      - jsonschema
    
  tier3:
    description: "Scientific/ML packages"
    base: "tier2"
    packages:
      - scipy
      - scikit-learn
      - opencv-python-headless
      - matplotlib
      - seaborn
      - statsmodels

# Package aliases - map common variations to canonical names
aliases:
  cv2: opencv-python-headless
  sklearn: scikit-learn
  bs4: beautifulsoup4
  yaml: pyyaml
  PIL: pillow
  np: numpy
  pd: pandas

# Packages that should never be installed (security/stability)
blacklist:
  - subprocess
  - os.system
  - eval
  - exec
