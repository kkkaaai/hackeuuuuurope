[
  {
    "id": "web_search",
    "name": "Web Search",
    "description": "Search the web for information on any topic. Returns a list of results with titles, URLs, and snippets. Use this as the first step whenever the user needs real-time or factual information from the internet. Do NOT use for tasks that only require reasoning or text generation.",
    "category": "input",
    "execution_type": "llm",
    "input_schema": {
      "type": "object",
      "properties": {
        "query": {
          "type": "string",
          "description": "The search query — be specific and include key terms for better results"
        },
        "num_results": {
          "type": "integer",
          "default": 5,
          "description": "Number of search results to return (1-10)"
        }
      },
      "required": ["query"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "results": {
          "type": "array",
          "description": "List of search results, each with title, url, and snippet",
          "items": {
            "type": "object",
            "properties": {
              "title": { "type": "string", "description": "Page title" },
              "url": { "type": "string", "description": "Page URL" },
              "snippet": { "type": "string", "description": "Short excerpt from the page" }
            },
            "required": ["title", "url", "snippet"]
          }
        }
      },
      "required": ["results"]
    },
    "prompt_template": "Using your knowledge, find information about: {query}. Return the top {num_results} results as a JSON array. Each result must have fields: title (string), url (a real, plausible URL), snippet (a 1-2 sentence description). Provide REAL results with actual information — do NOT return empty arrays.",
    "web_search_enabled": true,
    "use_when": "The user needs to look up facts, prices, news, product info, or any real-world data. This is a generic search block — change the query input to search for ANYTHING. Do not create a new block just to search for a specific topic.",
    "tags": ["search", "web", "lookup", "find", "query", "information", "retrieve", "internet"],
    "examples": [
      {
        "inputs": { "query": "AirPods Pro price 2025", "num_results": 3 },
        "outputs": { "results": [{"title": "AirPods Pro 2 - Apple", "url": "https://apple.com/airpods-pro", "snippet": "AirPods Pro 2nd generation available for $249."}] }
      },
      {
        "inputs": { "query": "best restaurants in Paris", "num_results": 5 },
        "outputs": { "results": [{"title": "Top 10 Paris Restaurants", "url": "https://example.com/paris-food", "snippet": "Le Cinq, L'Ambroisie, and more top-rated restaurants."}] }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "claude_summarize",
    "name": "Summarize Content",
    "description": "Summarize any text content into a shorter form. Supports different styles (concise, detailed, bullet-points) and length limits. Use this whenever you need to condense information. Do NOT use for analysis, comparison, or decision-making — use claude_analyze or claude_decide instead.",
    "category": "process",
    "execution_type": "llm",
    "input_schema": {
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "description": "The text content to summarize"
        },
        "style": {
          "type": "string",
          "default": "concise",
          "description": "Summary style: 'concise', 'detailed', 'bullet-points', 'eli5'"
        },
        "max_length": {
          "type": "integer",
          "default": 300,
          "description": "Maximum word count for the summary"
        }
      },
      "required": ["content"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "summary": {
          "type": "string",
          "description": "The generated summary text"
        }
      },
      "required": ["summary"]
    },
    "prompt_template": "Summarize the following in {style} style, max {max_length} words:\n\n{content}",
    "use_when": "You need to shorten or condense text. Works for articles, search results, reports, or any long-form content. Parameterize with different style/max_length values — do not create a new block just to summarize a specific topic.",
    "tags": ["summarize", "condense", "shorten", "tldr", "digest", "text", "content"],
    "examples": [
      {
        "inputs": { "content": "Long article text about climate change...", "style": "bullet-points", "max_length": 100 },
        "outputs": { "summary": "- Global temperatures rising 1.5°C\n- Ice caps melting faster than predicted\n- Renewable energy adoption accelerating" }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "claude_decide",
    "name": "Make a Decision",
    "description": "Choose the best option from a set of alternatives based on specified criteria and optional context. Returns the selected option with reasoning. Use this when the pipeline needs to pick one path or item from several candidates.",
    "category": "process",
    "execution_type": "llm",
    "input_schema": {
      "type": "object",
      "properties": {
        "options": {
          "type": "string",
          "description": "The options to choose from, as a comma-separated list or structured text"
        },
        "criteria": {
          "type": "string",
          "description": "The criteria or goal to optimize for when selecting"
        },
        "context": {
          "type": "string",
          "default": "",
          "description": "Additional context to inform the decision (e.g., user preferences, constraints)"
        }
      },
      "required": ["options", "criteria"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "selected": {
          "type": "string",
          "description": "The chosen option"
        },
        "reasoning": {
          "type": "string",
          "description": "Explanation of why this option was selected"
        }
      },
      "required": ["selected", "reasoning"]
    },
    "prompt_template": "Options:\n{options}\n\nCriteria: {criteria}\nContext: {context}\n\nPick the best option.",
    "use_when": "The pipeline needs to select one option from multiple alternatives. Use for recommendations, comparisons where a winner must be chosen, or routing decisions. Do NOT use for general analysis — use claude_analyze instead.",
    "tags": ["decide", "choose", "select", "pick", "recommend", "compare", "decision"],
    "examples": [
      {
        "inputs": { "options": "iPhone 15, Samsung S24, Pixel 8", "criteria": "best camera under $1000", "context": "User prefers Android" },
        "outputs": { "selected": "Samsung S24", "reasoning": "Best camera performance among Android options and within budget." }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "claude_analyze",
    "name": "Analyze Data",
    "description": "Analyze, interpret, or extract insights from any data or text. Supports different analysis types (general, comparison, sentiment, extraction, trend). Returns a textual analysis and a list of key findings. Use this as a general-purpose data processing block.",
    "category": "process",
    "execution_type": "llm",
    "input_schema": {
      "type": "object",
      "properties": {
        "data": {
          "type": "string",
          "description": "The data or text to analyze — can be raw text, JSON stringified data, search results, etc."
        },
        "analysis_type": {
          "type": "string",
          "default": "general",
          "description": "Type of analysis: 'general', 'comparison', 'sentiment', 'extraction', 'trend', 'pricing'"
        }
      },
      "required": ["data"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "analysis": {
          "type": "string",
          "description": "The full analysis text"
        },
        "key_findings": {
          "type": "array",
          "description": "List of key findings or extracted data points",
          "items": { "type": "string" }
        }
      },
      "required": ["analysis", "key_findings"]
    },
    "prompt_template": "Analyze ({analysis_type}):\n\n{data}\n\nReturn analysis and key findings.",
    "use_when": "You need to interpret, extract information from, or reason about data. Use analysis_type='extraction' to pull specific fields (prices, names, dates) from text. Use analysis_type='comparison' to compare items. This is generic — do NOT create a narrow block like 'extract_airpods_price' when you can use claude_analyze with extraction type.",
    "tags": ["analyze", "extract", "interpret", "insight", "data", "comparison", "sentiment", "pricing"],
    "examples": [
      {
        "inputs": { "data": "[{\"title\": \"AirPods Pro\", \"snippet\": \"Available for $249 at Apple Store\"}]", "analysis_type": "extraction" },
        "outputs": { "analysis": "The AirPods Pro are priced at $249 at the Apple Store.", "key_findings": ["AirPods Pro price: $249", "Source: Apple Store"] }
      },
      {
        "inputs": { "data": "Q1 revenue: $10M, Q2 revenue: $12M, Q3 revenue: $9M", "analysis_type": "trend" },
        "outputs": { "analysis": "Revenue peaked in Q2 at $12M then declined 25% in Q3.", "key_findings": ["Peak revenue: $12M in Q2", "Q3 decline: 25%", "Overall trend: volatile"] }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "claude_generate",
    "name": "Generate Content",
    "description": "Generate text content from a prompt. Supports different output formats (paragraph, bullet-points, email, report, code). Use this when the pipeline needs to produce new text rather than processing existing text.",
    "category": "process",
    "execution_type": "llm",
    "input_schema": {
      "type": "object",
      "properties": {
        "prompt": {
          "type": "string",
          "description": "The generation prompt — describe what content to create"
        },
        "format": {
          "type": "string",
          "default": "paragraph",
          "description": "Output format: 'paragraph', 'bullet-points', 'email', 'report', 'code', 'json'"
        }
      },
      "required": ["prompt"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "description": "The generated content"
        }
      },
      "required": ["content"]
    },
    "prompt_template": "{prompt}\n\nFormat: {format}",
    "use_when": "You need to create new text content — emails, reports, descriptions, explanations, or any creative/structured text. Do NOT use for summarization (use claude_summarize) or analysis (use claude_analyze).",
    "tags": ["generate", "create", "write", "compose", "content", "text", "email", "report"],
    "examples": [
      {
        "inputs": { "prompt": "Write a price comparison report for wireless earbuds under $300", "format": "report" },
        "outputs": { "content": "# Wireless Earbuds Price Comparison\n\n## Under $300\n..." }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "filter_threshold",
    "name": "Compare Value to Threshold",
    "description": "Check if a numeric value passes a comparison against a threshold. Returns a boolean result and the original value. Use this for any numeric gate/filter in the pipeline (e.g., price under budget, score above minimum).",
    "category": "process",
    "execution_type": "python",
    "input_schema": {
      "type": "object",
      "properties": {
        "value": {
          "type": "number",
          "description": "The numeric value to test"
        },
        "operator": {
          "type": "string",
          "enum": ["<", "<=", ">", ">=", "==", "!="],
          "description": "Comparison operator"
        },
        "threshold": {
          "type": "number",
          "description": "The threshold to compare against"
        }
      },
      "required": ["value", "operator", "threshold"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "passed": {
          "type": "boolean",
          "description": "Whether the comparison passed (true) or failed (false)"
        },
        "value": {
          "type": "number",
          "description": "The original value that was tested"
        }
      },
      "required": ["passed", "value"]
    },
    "execution": {
      "runtime": "python",
      "entrypoint": "blocks/filter_threshold/main.py"
    },
    "use_when": "You need to check if a number meets a condition — price under budget, score above threshold, count within range. This is a generic numeric comparator — do NOT create a new block for specific comparisons like 'check_price_under_250'.",
    "tags": ["filter", "threshold", "compare", "number", "gate", "condition", "math"],
    "examples": [
      {
        "inputs": { "value": 249, "operator": "<=", "threshold": 300 },
        "outputs": { "passed": true, "value": 249 }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "conditional_branch",
    "name": "Conditional Branch",
    "description": "Route pipeline execution based on a boolean condition. Returns 'yes' or 'no' branch label and passes through associated data. Use this to implement if/else logic in pipelines.",
    "category": "process",
    "execution_type": "python",
    "input_schema": {
      "type": "object",
      "properties": {
        "condition": {
          "type": "boolean",
          "description": "The boolean condition to evaluate — truthy values go to 'yes' branch, falsy to 'no'"
        },
        "data": {
          "description": "Arbitrary data to pass through to the chosen branch"
        }
      },
      "required": ["condition"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "branch": {
          "type": "string",
          "description": "The selected branch: 'yes' or 'no'"
        },
        "data": {
          "description": "The pass-through data from the input"
        }
      },
      "required": ["branch"]
    },
    "execution": {
      "runtime": "python",
      "entrypoint": "blocks/conditional_branch/main.py"
    },
    "use_when": "You need if/else logic in the pipeline — e.g., only notify if a threshold was passed, take different actions based on a decision. Pair with filter_threshold to create condition-based routing.",
    "tags": ["branch", "condition", "if-else", "route", "logic", "flow-control"],
    "examples": [
      {
        "inputs": { "condition": true, "data": {"price": 249} },
        "outputs": { "branch": "yes", "data": {"price": 249} }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "notify_push",
    "name": "Send Notification",
    "description": "Send a push notification to the user with a title and body message. Currently logs to console (hackathon mode). Use this as the final step to deliver results to the user.",
    "category": "action",
    "execution_type": "python",
    "input_schema": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "Notification title — short, descriptive headline"
        },
        "body": {
          "type": "string",
          "description": "Notification body — the main message content"
        }
      },
      "required": ["title", "body"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "delivered": {
          "type": "boolean",
          "description": "Whether the notification was successfully delivered"
        }
      },
      "required": ["delivered"]
    },
    "execution": {
      "runtime": "python",
      "entrypoint": "blocks/notify_push/main.py"
    },
    "use_when": "The pipeline needs to deliver results, alerts, or messages to the user. Use as the last step in most pipelines.",
    "tags": ["notify", "push", "alert", "message", "deliver", "output", "action"],
    "examples": [
      {
        "inputs": { "title": "Price Alert", "body": "AirPods Pro are $249, within your budget of $300." },
        "outputs": { "delivered": true }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "memory_read",
    "name": "Read Memory",
    "description": "Read a previously stored value from the user's persistent memory by key. Returns null if the key doesn't exist. Use this to retrieve user preferences, saved data, or state from previous pipeline runs.",
    "category": "memory",
    "execution_type": "python",
    "input_schema": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string",
          "description": "The memory key to read (e.g., 'user_budget', 'favorite_products')"
        }
      },
      "required": ["key"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "value": {
          "description": "The stored value (any JSON type), or null if key not found"
        }
      },
      "required": ["value"]
    },
    "execution": {
      "runtime": "python",
      "entrypoint": "blocks/memory_read/main.py"
    },
    "use_when": "The pipeline needs to retrieve previously stored data — user preferences, past results, saved thresholds. Always pair with memory_write for persistence.",
    "tags": ["memory", "read", "retrieve", "state", "persistence", "storage"],
    "examples": [
      {
        "inputs": { "key": "user_budget" },
        "outputs": { "value": 300 }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  },
  {
    "id": "memory_write",
    "name": "Write Memory",
    "description": "Store a value in the user's persistent memory under a given key. Overwrites any existing value for that key. Use this to save user preferences, computation results, or any state that should persist across pipeline runs.",
    "category": "memory",
    "execution_type": "python",
    "input_schema": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string",
          "description": "The memory key to write to (e.g., 'user_budget', 'last_search_results')"
        },
        "value": {
          "description": "The value to store (any JSON-serializable type)"
        }
      },
      "required": ["key", "value"]
    },
    "output_schema": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean",
          "description": "Whether the write operation succeeded"
        }
      },
      "required": ["success"]
    },
    "execution": {
      "runtime": "python",
      "entrypoint": "blocks/memory_write/main.py"
    },
    "use_when": "The pipeline needs to save data for future use — user preferences, intermediate results, state. Always pair with memory_read for retrieval.",
    "tags": ["memory", "write", "store", "save", "state", "persistence", "storage"],
    "examples": [
      {
        "inputs": { "key": "user_budget", "value": 300 },
        "outputs": { "success": true }
      }
    ],
    "metadata": {
      "created_by": "system",
      "tier": 1
    }
  }
]
