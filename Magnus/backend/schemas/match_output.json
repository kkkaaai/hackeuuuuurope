{
  "$defs": {
    "NewBlockSpec": {
      "description": "Description of a block that needs to be created.",
      "properties": {
        "suggested_id": {
          "description": "Proposed ID for the new block, e.g. 'scrape_hn'",
          "title": "Suggested Id",
          "type": "string"
        },
        "description": {
          "description": "What this block should do",
          "title": "Description",
          "type": "string"
        },
        "category": {
          "default": "process",
          "description": "Block category: 'input', 'process', 'action', or 'memory'",
          "title": "Category",
          "type": "string"
        },
        "execution_type": {
          "default": "llm",
          "description": "How the block runs: 'llm' or 'python'",
          "title": "Execution Type",
          "type": "string"
        },
        "input_schema": {
          "additionalProperties": true,
          "description": "JSON Schema for the block's inputs",
          "examples": [
            {
              "properties": {
                "url": {
                  "type": "string"
                }
              },
              "required": [
                "url"
              ],
              "type": "object"
            }
          ],
          "title": "Input Schema",
          "type": "object"
        },
        "output_schema": {
          "additionalProperties": true,
          "description": "JSON Schema for the block's outputs",
          "examples": [
            {
              "properties": {
                "data": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          ],
          "title": "Output Schema",
          "type": "object"
        },
        "prompt_template": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "For LLM blocks: prompt with {input_name} placeholders",
          "title": "Prompt Template"
        }
      },
      "required": [
        "suggested_id",
        "description",
        "input_schema",
        "output_schema"
      ],
      "title": "NewBlockSpec",
      "type": "object"
    }
  },
  "description": "Output of the match stage \u2014 split into found and missing.",
  "properties": {
    "matched_blocks": {
      "description": "Full block definitions from registry for blocks that were found",
      "items": {
        "additionalProperties": true,
        "type": "object"
      },
      "title": "Matched Blocks",
      "type": "array"
    },
    "missing_blocks": {
      "description": "Block specs that had no match \u2014 need to be created",
      "items": {
        "anyOf": [
          {
            "$ref": "#/$defs/NewBlockSpec"
          },
          {
            "additionalProperties": true,
            "type": "object"
          }
        ]
      },
      "title": "Missing Blocks",
      "type": "array"
    }
  },
  "required": [
    "matched_blocks",
    "missing_blocks"
  ],
  "title": "MatchOutput",
  "type": "object"
}